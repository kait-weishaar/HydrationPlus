<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;
        charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="./images/icons8-water-droplet-16.png" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="./style.css"/>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
        <title>Hydration+</title>
    </head>
    <body>
        <div class="container-fluid p-2 gradient text-white text-center anton-regular">
            <h1> Hydration+</h1>
            <p1>Simply enter the duration of your race and your sweat rate. Scroll for results.  </p1>
        </div>
        <section class="d-flex grid row m-2 column-gap-5">
            <div class="col card"><br>
                <h4 class="text-center">No sweat test data?</h4>
                <div class="card border-0">
                    <div class="card-body">
                        <h5 class="card-title text-center">Sweat Rate Norms</h5>
                        <table class="table table-striped">
                            <tbody>
                                <tr>
                                    <td>Low</td>
                                    <td>Less than 1 L/hr</td>
                                    <td>Testing Required</td>
                                </tr>
                                <tr>
                                    <td>Moderate</td>
                                    <td>1-1.5 L/hr </td>
                                    <td>Normal Sweating</td>
                                </tr>
                                <tr>
                                    <td>High</td>
                                    <td>1.5-2 L/hr mg</td>
                                    <td>Profuse Sweating</td>
                                </tr>
                                <tr>
                                    <td> Very High</td>
                                    <td>2 L/hr or more</td>
                                    <td>Testing Required</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div><br>
                <div class="card border-0">
                    <div class="card-body">
                        <h5 class="card-title text-center">Sodium Concentration Norms</h5>
                        <table class="table table-striped">
                            <tbody>
                                <tr>
                                    <td>Low</td>
                                    <td>Less than 750 mg/L</td>
                                    <td>Testing Required</td>
                                </tr>
                                <tr>
                                    <td>Moderate</td>
                                    <td>750-1100 mg/L </td>
                                    <td>No sweat crystals</td>
                                </tr>
                                <tr>
                                    <td>High</td>
                                    <td>1100-1450 mg/L</td>
                                    <td>Sweat crystals</td>
                                </tr>
                                <tr>
                                    <td> Very High</td>
                                    <td>1450-1850 mg/L</td>
                                    <td>Testing Required</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>    
                <div class="col-sm-3 col-md-3 card border-0">
                    <div class="card p-3">
                        <h3 class="text-center">Inputs</h3>
                        <form class="was-validated" id="form">
                            <label for="weight">Weight:</label>
                            <input type="text" id="weight" class="form-control" name="weight" placeholder="lbs" required><br>
                            <label for="sweatRate">Sweat Rate:</label>
                            <input type="text" id="sweatRate" class="form-control was-validated" name="Sweat Rate" placeholder="Liters/Hour" required><br>
                            <label for="Na+">Sodium Concentration</label>
                            <input type="text" id="Na+" class="form-control was-validated" name="Na+" placeholder="Milligrams/Liter" required><br>
                            <label for="duration">Event Duration</label>
                            <input type="text" id="duration" class="form-control was-validated" name="Duration" placeholder="Hours" required><br>
                            <button class ="btn gradient submit text-white" id="submit" type="submit">Calculate</button><br><br>
                            <style>button:hover {
                                background-image: linear-gradient(to left, #a5dae7 0%, #1a77c9 71%);
                             /* change the direction of the change here */
                            }</style>
                        </form>
                        
                    </div><br>
                    <div class="card p-3">
                        <h3 class="text-center">Results</h3><br>
                        <p> Fluid Consumption (L/hr)</p>
                        <p id="fluidResult" class="text-primary"></p>
                        <p> Sodium Consumption (mg/hr)</p>
                        <p id="sodiumResult" class="text-primary"></p>
                    </div>
                </div>
                <div class="col-sm-4 col-md-4 card border-0">
                    <div class="card text-center p-3">
                        <h3>Calculate Sweat Rate</h3>
                        <img src="./images/sweatrate.png" class="rounded" alt="Sweat rate calculation - see link in references">
                    </div><br>
                    
                </div>
        </section>
        <script>
            var fluidResult=document.getElementById("fluidResult")
            var sodiumResult=document.getElementById("sodiumResult")
            var submitButton = document.getElementById("form");


            submitButton.addEventListener("submit", (event)=>{
            event.preventDefault(); //Prevent default form submission
            
           //Get info from form
            var weight=form.elements["weight"].value;
            var sweatRate=form.elements["sweatRate"].value;
            var sodium=form.elements["Na+"].value;
            var duration=form.elements["duration"].value;    
            //Log info from form to console as a double check
            //console.log("Weight:", weight);
            //console.log("Sweate Rate:", sweatRate);
            //console.log("Sodium Concentration:", sodium);
            //console.log("Duration:", duration);

            //Find fluid replacement percentage
            var twoThreshold = weight*0.98;
            console.log("2% Dehydration:", twoThreshold);

            var difference = weight-twoThreshold;
            console.log("Difference:", difference);

            var fluidReplace = (((sweatRate*2.2)*duration)-difference)/((sweatRate*2.2)*duration);
            console.log("Fluid Replacement Percentage:", fluidReplace);

            var fluidConsumption = Math.round((sweatRate*duration*fluidReplace)/duration*100)/100;

            //Define reference data
            var fourSeventyFive=[0, 0, 0, 0, 0, 0, 0, 0, 38, 38];
            var sixSeventyFive=[0, 0, 0, 0, 0, 0, 0, 6, 59, 59];
            var nineHundred=[0, 0, 0, 0, 0, 0, 0, 29, 69, 69];
            var elevenFifty=[0, 0, 0, 0, 0, 0, 12, 43, 75, 75];
            var fourteenHundo=[0, 0, 0, 0, 0, 0, 26, 53, 79, 79];
            var sixteenHundo=[0, 0, 0, 0, 0, 14, 37, 60, 82, 82];
            var eighteenFifty=[0, 0, 0, 0, 5, 25, 45, 65, 84, 84];

            //Bounds for percent fluid intake - which are the index of the array so subtract 1 to match array indexing.
            var fluidLower=Math.floor(fluidReplace*10)-1;
            if(fluidLower<0) {
                fluidLower=0
            } else {fluidLower=fluidLower};
            console.log("Fluid lower bound", fluidLower);

            var fluidUpper=Math.ceil(fluidReplace*10)-1
            console.log("Fluid upper bound", fluidUpper);

            //Also need the value of lower bound
            var fL =Math.floor(fluidReplace*10)/10; 
            var fU=Math.ceil(fluidReplace*10)/10;


            //Define applicable array for sodium concentration
            if(sodium < 475) {
                console.log("Less than 475");
                var lowerBound = fourSeventyFive.at(fluidLower);
                console.log(lowerBound);
                var upperBound = fourSeventyFive.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;
                sodiumResult.innerHTML += "   (Calculator doesn't support Sodium <475)";
            } else if (sodium === 475){
                console.log("Exactly 475");
                var lowerBound = fourSeventyFive.at(fluidLower);
                console.log(lowerBound);
                var upperBound = fourSeventyFive.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;
            }  else if (sodium < 675) {
                console.log("675")
                var lowerBound = fourSeventyFive.at(fluidLower);
                console.log("low lower",lowerBound);
                var upperBound = fourSeventyFive.at(fluidUpper);
                console.log("low upper" ,upperBound);
                var LowerBound = sixSeventyFive.at(fluidLower);
                console.log("high lower" ,LowerBound);
                var UpperBound = sixSeventyFive.at(fluidUpper);
                console.log("high upper" ,UpperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                console.log("linear int 1",lowInt);
                var highInt = LowerBound + ((fluidReplace-fL)*(UpperBound-LowerBound))/(fU-fL);
                console.log("linear int 2",highInt);
                var linearInt = lowInt +((sodium-475)*(highInt-lowInt))/(675-475);
                console.log("linear int 3" ,linearInt);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*linearInt)/100;
                sodiumResult.textContent = sodiumConsumption;
            } else if (sodium === 675){
                console.log("Exactly 675")
                var lowerBound = sixSeventyFive.at(fluidLower);
                console.log(lowerBound);
                var upperBound = sixSeventyFive.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;

            } else if (sodium < 900) {
                console.log("900")
                var lowerBound = sixSeventyFive.at(fluidLower);
                console.log(lowerBound);
                var upperBound = sixSeventyFive.at(fluidUpper);
                console.log(upperBound);
                var LowerBound = nineHundred.at(fluidLower);
                console.log(LowerBound);
                var UpperBound = nineHundred.at(fluidUpper);
                console.log(UpperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                console.log("linear int 1",lowInt);
                var highInt = LowerBound + ((fluidReplace-fL)*(UpperBound-LowerBound))/(fU-fL);
                console.log("linear int 2",highInt);
                var linearInt = lowInt +((sodium-675)*(highInt-lowInt))/(900-675);
                console.log("linear int 3" ,linearInt);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*linearInt)/100;
                sodiumResult.textContent = sodiumConsumption;
            } else if (sodium === 900){
                console.log("Exactly 900")
                var lowerBound = nineHundred.at(fluidLower);
                console.log(lowerBound);
                var upperBound = nineHundred.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;

            } else if (sodium < 1150) {
                console.log("1150")
                var lowerBound = nineHundred.at(fluidLower);
                console.log(lowerBound);
                var upperBound = nineHundred.at(fluidUpper);
                console.log(upperBound);
                var LowerBound = elevenFifty.at(fluidLower);
                console.log(LowerBound);
                var UpperBound = elevenFifty.at(fluidUpper);
                console.log(UpperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                console.log("linear int 1",lowInt);
                var highInt = LowerBound + ((fluidReplace-fL)*(UpperBound-LowerBound))/(fU-fL);
                console.log("linear int 2",highInt);
                var linearInt = lowInt +((sodium-900)*(highInt-lowInt))/(1150-900);
                console.log("linear int 3" ,linearInt);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*linearInt)/100;
                sodiumResult.textContent = sodiumConsumption;
            } else if (sodium === 1150){
                console.log("Exactly 1150")
                var lowerBound = elevenFifty.at(fluidLower);
                console.log(lowerBound);
                var upperBound = elevenFifty.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;

            } else if (sodium < 1400) {
                console.log("1400")
                var lowerBound = nineHundred.at(fluidLower);
                console.log(lowerBound);
                var upperBound = nineHundred.at(fluidUpper);
                console.log(upperBound);
                var LowerBound = fourteenHundo.at(fluidLower);
                console.log(LowerBound);
                var UpperBound = fourteenHundo.at(fluidUpper);
                console.log(UpperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                console.log("linear int 1",lowInt);
                var highInt = LowerBound + ((fluidReplace-fL)*(UpperBound-LowerBound))/(fU-fL);
                console.log("linear int 2",highInt);
                var linearInt = lowInt +((sodium-1150)*(highInt-lowInt))/(1400-1150);
                console.log("linear int 3" ,linearInt);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*linearInt)/100;
                sodiumResult.textContent = sodiumConsumption;
            } else if (sodium === 1400){
                console.log("Exactly 1400")
                var lowerBound = fourteenHundo.at(fluidLower);
                console.log(lowerBound);
                var upperBound = fourteenHundo.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;

            } else if (sodium === 1850){
                console.log("Exactly 1850")
                var lowerBound = eighteenFifty.at(fluidLower);
                console.log(lowerBound);
                var upperBound = eighteenFifty.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;

            } else if (sodium > 1850){
                console.log("Over 1850")
                var lowerBound = eighteenFifty.at(fluidLower);
                console.log(lowerBound);
                var upperBound = eighteenFifty.at(fluidUpper);
                console.log(upperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*lowInt)/100;
                sodiumResult.textContent = sodiumConsumption;
                sodiumResult.innerHTML += "   (Calculator doesn't support Sodium >1850)";

            } else {
                console.log("1850")
                var lowerBound = eighteenFifty.at(fluidLower);
                console.log(lowerBound);
                var upperBound = eighteenFifty.at(fluidUpper);
                console.log(upperBound);
                var LowerBound = eighteenFifty.at(fluidLower);
                console.log(LowerBound);
                var UpperBound = eighteenFifty.at(fluidUpper);
                console.log(UpperBound);
                var lowInt = lowerBound + ((fluidReplace-fL)*(upperBound-lowerBound))/(fU-fL);
                console.log("linear int 1",lowInt);
                var highInt = LowerBound + ((fluidReplace-fL)*(UpperBound-LowerBound))/(fU-fL);
                console.log("linear int 2",highInt);
                var linearInt = lowInt +((sodium-1400)*(highInt-lowInt))/(1850-1400);
                console.log("linear int 3" ,linearInt);
                var sodiumConsumption = Math.round(sodium*fluidConsumption*linearInt)/100;
                sodiumResult.textContent = sodiumConsumption;
            };

            
            fluidResult.textContent = fluidConsumption;
            
                


});
        </script>
    </body>
    <footer class="p-2 gradient text-white text-center sticky-bottom">
        <div>Â© 2025 Evan Hoyt and Kait Weishaar. All rights reserved. This calcaulator is an original implementation of publicily available sports science. Redistribution or commercial use without permission is prohibited.
            <br>Developed by Evan Hoyt and Kait Weishaar. For questions, reach out to Evan Hoyt<a href="https://www.linkedin.com/in/evan-hoyt-087317204/" target="_blank">
            <img class="social" src="./images/icons8-linkedin (1).svg" alt=""/>
         </a></div>
         <div class="small"><a target="_blank" href="https://icons8.com/icon/67673/linkedin">LinkedIn</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a></div>
    </footer>
</html>